function findNextCountry(){var t=$(".updateAvailability:first");if(0<t.length){var e=t.find(".icon .fa");e.removeClass().addClass("fa fa-spinner fa-spin");var s=t.find(".updateAvailabilityType:first");s.html('<i class="fa fa-spinner fa-spin"></i>'),$.ajax({url:siteData.data("url")+"/admin/reporterAvailabilityUpdate/",method:"POST",dataType:"json",data:{country:t.data("ref"),type:s.data("type")},success:function(a){if(a.valid)for(var i in a)"valid"!==i&&s.hasClass(i)&&(0===a[i]&&(a[i]="-"),s.html(a[i]));else s.html('<i class="fa fa-times text-danger"></i>');s.removeClass("updateAvailabilityType"),0===t.find(".updateAvailabilityType").length&&(0<t.find(".fa-times").length?e.removeClass().addClass("fa fa-times text-danger"):e.removeClass().addClass("fa fa-check text-success"),t.removeClass("updateAvailability")),findNextCountry()},error:function(){e.removeClass().addClass("fa fa-times text-danger"),s.html('<i class="fa fa-times text-danger"></i>'),s.removeClass("updateAvailabilityType"),0===t.find(".updateAvailabilityType").length&&t.removeClass("updateAvailability"),findNextCountry()}})}}$(function(){$(".reporterAvailability .item td").each(function(){if(void 0!==$(this).data("results")){var a=$(this).html();$(this).html('<a href="#" class="availability-inspector-btn">'+a+"</a>")}}),$(document).on("click",".availability-inspector-btn",function(){var a=$(this).parents("td").data("results"),i=$(this).parents("td").data("group");if($("#availability-inspector .list-group-item").hide(),$("#availability-inspector .list-group").hide(),$("#availability-inspector .list-group-"+i).show(),void 0!==a)for(var t in a)$("#availability-inspector .list-group-item-"+i+"-"+a[t]).show();$("#availability-inspector").modal("show")}),$(".startUpdate").click(function(){$(".reporterAvailability .item").addClass("updateAvailability"),$(".reporterAvailability .item .icon .fa").removeClass().addClass("fa fa-hourglass-start"),$(".reporterAvailability .item .item-type").addClass("updateAvailabilityType"),findNextCountry()}),$(".startUpdateSingle").click(function(){var a=$(this).parents(".item");a.addClass("updateAvailability"),a.find(".item-type").addClass("updateAvailabilityType"),a.find(".icon .fa").removeClass().addClass("fa fa-hourglass-start"),findNextCountry()})});