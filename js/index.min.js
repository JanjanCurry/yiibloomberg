"use strict";var siteData=$("#siteData"),chartsLog={};function initHidden(){$(".hidden").hide().removeClass("hidden")}function loadStyleSheets(){var e=$("#deferred-css").data("src");if(void 0!==e)for(var t in e)document.createStyleSheet?document.createStyleSheet(e[t]):$("head").append($("<link rel='stylesheet' href='"+e[t]+"' type='text/css' media='screen' />"));$("#deferred-css").remove()}function deviceSpec(){}function initBreakpoint(){$.each(["xs","sm","md","lg"],function(e,t){$("body").append('<div class="device-'+t+" visible-"+t+'"></div>')})}function getBreakpoint(){var e=["xs","sm","md","lg"];for(var t in e)if($(".device-"+e[t]).is(":visible"))return e[t]}function isBreakpoint(e){return $(".device-"+e).is(":visible")}function positionFooter(){var e=$(window).height()-$(".header .navbar").outerHeight()-29;$(".content").css("min-height",e),setTimeout(function(){},800)}function openInNewTab(e){var t=window.open(e,"_blank");t&&t.focus()}function showFlashMessage(){0<$("#notifications .alert").length&&($("#notifications").show(),setTimeout(function(){$("#notifications").fadeOut(500,function(){$("#notifications").find(".alert").remove()})},4e3))}function addFlashMessage(e,t){if($.isArray(t)){var i="";for(var a in t)i+="<li>"+t[a]+"</li>";t=i}else t="<li>"+t+"</li>";$("#notifications .notifications-container").append('<div class="alert alert-'+e+'"><ul>'+t+"</ul></div>"),showFlashMessage()}function refreshForm(){$(document).on("click",".input-group-addon",function(){$(this).siblings("input, select").focus()}),$("[data-toggle=tooltip]").tooltip({html:!0,trigger:"hover"})}function clearDetails(e,t){t=void 0!==t?t:"",$(t+" [id^="+e+"_][type!=checkbox]").val(""),$(t+" [id^="+e+"_][type=checkbox]").prop("checked",!1),$(t+" [id^="+e+"_]").trigger("change")}function fillDetails(e,t,i){i=void 0!==i?i:"";var a="";for(a in t)$.isArray(t[a])?0<$(i+" #"+e+"_"+a).length?($(i+" #"+e+"_"+a).val(t[a].join()),$(i+" #"+e+"_"+a).trigger("change")):$(i+" [id^="+e+"_"+a+"]").each(function(e){0<=$.inArray($(this).val(),t[a])?$(this).prop("checked",!0):$(this).prop("checked",!1),$(this).trigger("change")}):($(i+" #"+e+"_"+a).val(t[a]),$(i+" #"+e+"_"+a).trigger("change"))}$(function(){initHidden(),initBreakpoint(),deviceSpec(),isBreakpoint("xs")||(new WOW).init(),loadStyleSheets(),positionFooter(),setTimeout(function(){$(".page-loading-default").is(":visible")&&$(".page-loading").css({"-webkit-animation":"none","-moz-animation":"none","-ms-animation":"none",animation:"none","padding-top":"0"}).fadeOut("fast")},500),setTimeout(function(){$(".page-loading").hide()},4e3),$(".page-loading").click(function(){$(this).css({"-webkit-animation":"none","-moz-animation":"none","-ms-animation":"none",animation:"none","padding-top":"0"}).hide()}),$(window).load(function(){$(".loader-bg").fadeOut(1e3,function(){isBreakpoint("xs")})}),$(window).on("resize",function(){positionFooter()}),$(document).on("click",".toggleBtn",function(){$("."+$(this).data("toggle")).slideToggle(),0<$(this).find(".fa-caret-down").length?$(this).find(".fa-caret-down").addClass("fa-caret-right").removeClass("fa-caret-down"):0<$(this).find(".fa-caret-right").length&&$(this).find(".fa-caret-right").addClass("fa-caret-down").removeClass("fa-caret-right")})}),$(function(){$(".btn").mouseup(function(){$(this).blur()}),$(document).on("click",'a[href="#"]',function(e){e.preventDefault()}),$(document).on("click","a",function(e){void 0===$(this).attr("href")||-1!==$(this).attr("href").indexOf("#")||-1!==$(this).attr("href").indexOf("/images/")||"_blank"==$(this).attr("target")||$(this).hasClass("delete-confirm-link")||(e.preventDefault(),$(".page-loading .page-loading-content").hide(),$(".page-loading").fadeIn("fast"),window.location.href=$(this).attr("href"))}),$(".main-menu-toggle").click(function(){var e=$(".wrap-menu");e.hasClass("active")?($(this).removeClass("active").blur(),e.removeClass("active")):($(this).addClass("active"),e.addClass("active"))})}),$(function(){showFlashMessage(),$("#notifications").on("click",".notifications-overlay, .notifications-container",function(){$("#notifications").fadeOut(500,function(){$("#notifications").find(".alert").remove()})}),$(document).on("click",".delete-confirm-link",function(e){e.preventDefault(),confirm("Are you sure you want to delete this?")&&(window.location=$(this).attr("href"))}),$(document).on("submit",".delete-confirm-form",function(e){void 0!==$(this).data("delete-confirm")&&"1"==$(this).data("delete-confirm")||(e.preventDefault(),confirm("Are you sure you want to delete this?")&&($(this).data("delete-confirm","1"),$(this).submit()))}),$(".modal").addClass("animated bounceInDown fade").removeClass("fade-scale").find(".modal-dialog").addClass(""),$(".modal").on("hidden.bs.modal",function(e){$(this).find(".modal-dialog").removeClass("bounceInDown animated").addClass("bounceInDown animated")})}),$(function(){$(document).on("click",".user-alert-list .dropdown-toggle",function(){$.ajax({url:siteData.data("url")+"/alert/seen/"})}),$(document).on("click",".user-alert-list .user-alert-item",function(){var t=$(this);$.ajax({url:siteData.data("url")+"/alert/view/"+$(this).data("id"),success:function(e){e.valid&&($("#alertView .alert-content").html(e.message),$("#alertView").modal("show"),t.find(".fa").removeClass("fa-circle").addClass("fa-circle-o"))}})})}),$(function(){var e=$("#search"),t=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:siteData.data("url")+"/autoComplete/search?term=%QUERY",wildcard:"%QUERY"},sufficient:10});t.initialize(),e.typeahead({hint:!1,highlight:!0,minLength:2},{limit:5e3,name:"search",displayKey:"value",source:t.ttAdapter(),templates:{suggestion:Handlebars.compile('<div class="search-item"><div class="row"><div class="col-sm-8 col-md-9">{{value}}</div><div class="col-sm-4 col-md-3 hidden-xs text-right"><small><span class="premium">{{premiumDisplay}}</span> {{typeDisplay}}</small></div></div></div>')}}),e.on("typeahead:selected",function(e,t,i){if(t.premium)window.open(siteData.data("url")+"/upgrade","_blank").focus();else switch(t.type){case"commodity":window.location.href=siteData.data("url")+"/commodity/code/"+t.commodity;break;case"currency":window.location.href=siteData.data("url")+"/currency/code/"+t.currency;break;case"equity":window.location.href=siteData.data("url")+"/equity/code/"+t.equity;break;case"trade":window.location.href=siteData.data("url")+"/trade/country/"+t.reporter;break;case"tradeIndicator":window.location.href=siteData.data("url")+"/trade/country/"+t.reporter+"?indicator="+t.indicator;break;case"macro":window.location.href=siteData.data("url")+"/macro/index?macro="+t.macro;break;case"macroReporter":window.location.href=siteData.data("url")+"/macro/index?macro="+t.macro+"&reporter="+t.reporter;break;default:window.location.href=siteData.data("url")+"/search/"}}),e.on("keyup",function(e){13==e.which&&$(".tt-suggestion:first-child").trigger("click")}),e.on("focus",function(){""==e.val()&&e.val("default").trigger("input").val("")}),e.on("focusout",function(){setTimeout(function(){"default"==e.val()&&e.val("").trigger("input")},10)})}),$(function(){refreshForm()});